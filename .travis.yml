language: php
php:
- 7.2
services:
- mysql
addons:
  apt:
    sources:
    - mysql-5.7-trusty
    packages:
    - mysql-server
    - mysql-client
dist: trusty
sudo: required
before_script:
- cp .env.travis .env
- composer self-update
- composer install --no-interaction
- mysql -e 'create database homestead_test;'
- npm install
- npm run production
script:
- php artisan key:generate
- vendor/bin/phpunit
deploy:
  provider: script
  script: bash deploy.sh
  on:
    branch: master
notifications:
  slack:
    rooms:
      secure: Kq4VaMSwhebLyoqsLmVbh7ZhdOAut/7fgHrPgj6c3sX0Sn2bz5lHI6AT9c50eNlq87LiPDvPpXt8Wa3GFadpqlRP3u9EwNA2N4PTQ70VJWQXw8geg1yRJnSGs972SZDZxTM37Sdod/I+sLgOYo0C5aYLp4egqme75mKXqo+oexoaj7uDcCZK1RhXuzlojG0+1SPA+d7ya+hoQOAKWMoiTMviw011nLgZFSze9wHhdsZx9sszcRpnv4Oj9GzBeN6qs8nIMPf0WS2TUNb6mt7SrwA4JwyMsjraYcuwzbMASJIkfYEtSY0dYeOU+gafMvT34SmHdHir32U2yJ43CsWIrtgBBu26BJodoXhV5qwxfQxIkPsbZFOThoyDX5FSHaIDlohxUfAzWo5qs3TwIkPhCSNCCmQizbH9rlBFtDLhSWZIr9LB2c5ILxNvnOpQDaJziVSkicSJMbDD0uL+5qWi+rNH1N+rMpZwRM3BxmKfT/OfF5gormvKDnfzttGl5VebZ/UI5TB8MI419pAzi3UrmT2fJnyWum7p/17W/prmkUmjF/2M4M37T7+rIg80QOzBnnkpCSsjKGAV4s+3l7608Grxdi9MBg9+IyIqCgSqogZoyWrOuLmwY5OXIai6So+NmA46lf0kbeCJhjuCp1RIKdqN6zTviuJICbxwQ+o0aDE=
cache:
  directories:
  - "$HOME/.composer/cache"
  - "$HOME/.npm"
env:
  global:
    secure: MxBEwVaeP+7iq+lu1sAyW47qOE6ke/g3JfNdA5oC9gEqz9oZn5wyGJjLWDoy511Q+5RS1wjCAOgpIBhxrIKC1Ov9K4uEWS5AIJg1wvktggh07YpbLikI5LP13UTbtnOKk0uRAoBHD3UniYInfi2sN+/nI2rBolxhhrGOmdRhtPfhYAdgkzWbXR4QBOixMpqnrzxHmLb4jLkqnEQHhaL3Xi8j3/gJvEuphCoORpVK2JCOo6ywKlVVcOdG6mrz5HcYeBdXAh3xB8HUU/q8jr03PfZaOsmdBrIfxFy5vphCy1P2XZzptBF92Ccsklfd4LWtJO24NYH4T5OklxmyZno5izwogFqhU+9ahoCQZT9g/UxfFMD2tmLXHfYyw7G7l4mdG74p6RaGYH9a7o0TbsO1yJAmbv+EvxdVxioxWRCpAgL+V5atYDRI6FgrXnMJnGfBZOzMYPlQ6QTXCGbl3ZufD6eHVJuSqO3g4YF2L5lUjr8beWAbnyZVgFhPTzzktbUVus0WXFpLMz8J2SrG/l1Kjd5dsdaSrb152A2v0H1kEYlv6qS/7IlOYmAS0XSKDnZ9NBkz7ykuDRiKykJGyG8T9bvO0Qkb1fxnzcjlfD/xxVCX/5bCDut6epwqdZAJlMLpOSZCFXNLhTNbcUpp/xb+nfGn6vlWHzpdN6otLITd3fo=
