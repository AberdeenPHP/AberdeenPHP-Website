language: php
php:
- 7.2
services:
- mysql
addons:
  apt:
    sources:
    - mysql-5.7-trusty
    packages:
    - mysql-server
    - mysql-client
dist: trusty
sudo: required
before_script:
- cp .env.travis .env
- composer self-update
- composer install --no-interaction
- mysql -e 'create database homestead_test;'
script:
- php artisan key:generate
- vendor/bin/phpunit
deploy:
  provider: script
  script: bash deploy.sh
  on:
    branch: master
notifications:
  slack:
    rooms:
      secure: Kq4VaMSwhebLyoqsLmVbh7ZhdOAut/7fgHrPgj6c3sX0Sn2bz5lHI6AT9c50eNlq87LiPDvPpXt8Wa3GFadpqlRP3u9EwNA2N4PTQ70VJWQXw8geg1yRJnSGs972SZDZxTM37Sdod/I+sLgOYo0C5aYLp4egqme75mKXqo+oexoaj7uDcCZK1RhXuzlojG0+1SPA+d7ya+hoQOAKWMoiTMviw011nLgZFSze9wHhdsZx9sszcRpnv4Oj9GzBeN6qs8nIMPf0WS2TUNb6mt7SrwA4JwyMsjraYcuwzbMASJIkfYEtSY0dYeOU+gafMvT34SmHdHir32U2yJ43CsWIrtgBBu26BJodoXhV5qwxfQxIkPsbZFOThoyDX5FSHaIDlohxUfAzWo5qs3TwIkPhCSNCCmQizbH9rlBFtDLhSWZIr9LB2c5ILxNvnOpQDaJziVSkicSJMbDD0uL+5qWi+rNH1N+rMpZwRM3BxmKfT/OfF5gormvKDnfzttGl5VebZ/UI5TB8MI419pAzi3UrmT2fJnyWum7p/17W/prmkUmjF/2M4M37T7+rIg80QOzBnnkpCSsjKGAV4s+3l7608Grxdi9MBg9+IyIqCgSqogZoyWrOuLmwY5OXIai6So+NmA46lf0kbeCJhjuCp1RIKdqN6zTviuJICbxwQ+o0aDE=
env:
  global:
  - secure: f7ctKy3Kw5U4PTN4lpcY6LoCf63yR01o8BW2MVVP5x9rXdg6xE1WPeleHAUjCNdY88kct30XU55+ps6/hLELSrb1SAcxBsxZuzYMzdjIlJDZbE0hEqFrr0bTM/mw3sccdski7YeXJcPPrgK6+HuA3e3taTsJbnhLTwcwLNfhaUOoi66HtnLEhx0pIjTVhQg6TAK1CkGJf+3TOaOJgns7Ds6Bynoku5IOW/0T4PBjq4qOm3lBlCUMOnw+O4b6JLwD0Z4XmgdOqsAAgZ1qklBy/rai+cP9tEjsTk588/v8RNr1iiWmRAkkNJPlRriak+nO3oBuNbqdjDQ31x0c7H+V1WocmpyCOfHLA0EL1n44Z01KnsplUvpIQG6mk5wJ9d9Su5BdBB42gokEh29JO3XOmI+/2DjG+oYp8e0mNMdQUkzSX7+rHRxh3SQPaWGqNVoIqMk86AgoYGeivQTAyQXzndlORl5mwrCeWVWRQAXSWYmlOrdLpwwOxUnXgb+SVxChE6T58ZBEdbtQZ7qYSxVBycnbHKjyotb0iDOJxN6v+7yqdmbdtGBa2WaaN/lrG4ohumMvmGB7YeVChyeFBRCXwDwtm1TuTP6IZX2sKIUOCB2tua3Xi1UYXSNU4nFcpWxtviqYUJqG/kbp0XnyuK46UbclpwubaVNlHPRqRMuEbus=
cache:
  directories:
  - "$HOME/.composer/cache"
  - "$HOME/.npm"
